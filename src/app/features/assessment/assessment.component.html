<div class="summary-bar">
  <!-- Assessment info on the left -->
  <span style="margin-right:auto; display: flex; flex-direction: column; justify-content: center; gap: 0.1rem;">
    <span style="display: flex; align-items: center; gap: 1.5rem;">
      <span class="assessment-number"><span style="font-weight: normal;">{{ displayId()}}</span></span>
      <span class="assessment-title"><span style="font-weight: normal;">{{ assessmentTitle }}</span></span>
    </span>
    <span><strong>Status:</strong> <span style="font-weight: normal;"> {{ assessmentStatus }}</span></span>
  </span>
  <!-- Actions on the right -->
  <span class="summary-bar-actions">
    <button mat-icon-button matTooltip="Attachments" aria-label="Attachments" (click)="openPanel('Attachments')">
      <mat-icon>attach_file</mat-icon>
    </button>
    <button mat-icon-button matTooltip="Reports" aria-label="Reports" (click)="openPanel('Reports')">
      <mat-icon>insert_chart</mat-icon>
    </button>
    <button mat-icon-button matTooltip="Logs" aria-label="Logs" (click)="openPanel('Logs')">
      <mat-icon>list</mat-icon>
    </button>
  </span>
  
</div>

<mat-tab-group [selectedIndex]="selectedTabIndex()" (selectedIndexChange)="onTabChange($event)">
  @for (tab of visibleTabs(); track tab.title) {
    <mat-tab [label]="tab.title" [disabled]="tab.disabled">
      @if (tab.title === 'Overview') {
        <app-assessment-overview />
      }
      @if (tab.title === 'Deployment') {
        <app-assessment-deployment [assessmentId]="assessmentId() ? +assessmentId()! : 0" [assessmentTitle]="assessmentTitle" />
      }
      @if (tab.title === 'Relationships') {
        <app-assessment-relationships />
      }
      @if (tab.title === 'Scope') {
        <app-assessment-scope />
      }
      @if (tab.title === 'Policy') {
        <app-assessment-policy />
      }
      @if (tab.title === 'Regulation') {
        <app-assessment-regulation />
      }
      @if (tab.title === 'Risks') {
        <app-assessment-risks />
      }
      @if (tab.title === 'Risk List') {
        <app-assessment-risk-list />
      }
      @if (tab.title === 'Notes') {
        <app-assessment-notes />
      }
      @if (tab.title === 'POV') {
        <app-assessment-pov />
      }
    </mat-tab>
  }
</mat-tab-group>

<!-- Sliding panel -->
<div class="slide-panel" [class.open]="isPanelOpen()">
  <div class="slide-panel-header">
    <h3>{{ panelTitle() }}</h3>
    <button mat-icon-button (click)="closePanel()" aria-label="Close">
      <mat-icon>close</mat-icon>
    </button>
  </div>
  <div class="slide-panel-content">
    <p>Panel content goes here...</p>
  </div>
</div>

