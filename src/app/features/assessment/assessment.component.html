<div class="summary-bar">
  <!-- Assessment info on the left -->
  <span style="margin-right:auto; display: flex; flex-direction: column; justify-content: center; gap: 0.1rem;">
    <span style="display: flex; align-items: center; gap: 1.5rem;">
      <span class="assessment-number"><span style="font-weight: normal;">{{ displayId()}}</span></span>
      <span class="assessment-title"><span style="font-weight: normal;">{{ assessmentTitle }}</span></span>
    </span>
    <span><strong>Status:</strong> <span style="font-weight: normal;"> {{ assessmentStatus }}</span></span>
  </span>
  <!-- Actions on the right -->
  <span class="summary-bar-actions">
    <button mat-icon-button matTooltip="Attachments" aria-label="Attachments" (click)="openPanel('Attachments')">
      <mat-icon>attach_file</mat-icon>
    </button>
    <button mat-icon-button matTooltip="Reports" aria-label="Reports" (click)="openPanel('Reports')">
      <mat-icon>insert_chart</mat-icon>
    </button>
    <button mat-icon-button matTooltip="Logs" aria-label="Logs" (click)="openPanel('Logs')">
      <mat-icon>list</mat-icon>
    </button>
  </span>
  
</div>

<mat-tab-group [selectedIndex]="selectedTabIndex()" (selectedIndexChange)="onTabChange($event)">
  <mat-tab *ngFor="let tab of visibleTabs(); let idx = index; trackBy: trackByTitle" [label]="tab.title" [disabled]="tab.disabled">
    <ng-template matTabContent>
      <ng-container *ngIf="selectedTabIndex() === idx">
        <ng-container [ngSwitch]="tab.title">
          <app-assessment-overview *ngSwitchCase="'Overview'"></app-assessment-overview>
          <app-assessment-deployment *ngSwitchCase="'Deployments'" [assessmentId]="assessmentId() ? +assessmentId()! : 0" [assessmentTitle]="assessmentTitle"></app-assessment-deployment>
          <app-assessment-relationships *ngSwitchCase="'Relationships'"></app-assessment-relationships>
          <app-assessment-scope *ngSwitchCase="'Scope'"></app-assessment-scope>
          <app-assessment-policy *ngSwitchCase="'Policies'"></app-assessment-policy>
          <app-assessment-regulation *ngSwitchCase="'Regulations'"></app-assessment-regulation>
          <app-assessment-risks *ngSwitchCase="'Risks'"></app-assessment-risks>
          <app-assessment-risk-list *ngSwitchCase="'Risk List'"></app-assessment-risk-list>
          <app-assessment-notes *ngSwitchCase="'Notes'"></app-assessment-notes>
          <app-assessment-pov *ngSwitchCase="'POV'"></app-assessment-pov>
          <app-assessment-stakeholders *ngSwitchCase="'Stakeholders'"></app-assessment-stakeholders>
        </ng-container>
      </ng-container>
    </ng-template>
  </mat-tab>
</mat-tab-group>

<!-- Sliding panel -->
<div class="slide-panel" [class.open]="isPanelOpen()">
  <div class="slide-panel-header">
    <h3>{{ panelTitle() }}</h3>
    <button mat-icon-button (click)="closePanel()" aria-label="Close">
      <mat-icon>close</mat-icon>
    </button>
  </div>
  <div class="slide-panel-content">
    <p>Panel content goes here...</p>
  </div>
</div>

